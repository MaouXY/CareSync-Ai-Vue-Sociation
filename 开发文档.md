# CareSync AI 项目开发文档

## 1. 项目概述

## 7. 后续开发计划

1. **完善数据可视化**：根据社工需求，开发更多类型的统计图表
2. **接入真实数据**：与后端API对接，展示实时数据
3. **主题适配**：根据项目设计系统，统一所有图表的视觉风格

## 2. 技术栈

### 2.1 前端技术栈
- **框架**: Vue 3 + TypeScript
- **构建工具**: Vite
- **状态管理**: Pinia
- **UI组件库**: Arco Design Vue
- **路由管理**: Vue Router
- **HTTP客户端**: Axios
- **图表库**: ECharts

### 2.2 开发工具
- **包管理器**: npm
- **代码规范**: ESLint + Prettier
- **版本控制**: Git
- **IDE推荐**: VS Code

## 3. ECharts 使用指南

### 3.1 安装

ECharts 已经安装在项目中，如需重新安装或指定版本，可以使用以下命令：

```bash
npm install echarts
# 或指定版本
npm install echarts@5.4.3
```

### 3.2 基础使用

项目中已经创建了一个示例组件 `EChartsDemo.vue`，位于 `src/components/` 目录下。这是一个可复用的饼图组件，用于展示儿童风险等级分布。

#### 3.2.1 在页面中使用组件

```vue
<template>
  <div class="dashboard">
    <h2>儿童风险统计</h2>
    <EChartsDemo 
      width="800px" 
      height="500px" 
      :chartData="customData" 
    />
  </div>
</template>

<script setup lang="ts">
import EChartsDemo from '@/components/EChartsDemo.vue';

// 自定义数据
const customData = [
  { name: '紧急风险', value: 8, itemStyle: { color: '#EF4444' } },
  { name: '中风险', value: 15, itemStyle: { color: '#F59E0B' } },
  { name: '低风险', value: 32, itemStyle: { color: '#22C55E' } },
  { name: '无风险', value: 45, itemStyle: { color: '#4F46E5' } },
];
</script>
```

### 3.3 创建新的图表组件

以下是创建新图表组件的基本步骤：

1. **导入ECharts**

```typescript
import * as echarts from 'echarts';
import type { EChartsOption } from 'echarts';
```

2. **初始化图表**

```typescript
const chartRef = ref<HTMLElement>();
let chartInstance: echarts.ECharts | null = null;

const initChart = () => {
  if (!chartRef.value) return;
  
  chartInstance = echarts.init(chartRef.value);
  
  const option: EChartsOption = {
    // 配置选项
    title: {
      text: '图表标题',
    },
    // 其他配置...
  };
  
  chartInstance.setOption(option);
};
```

3. **响应式处理**

```typescript
// 监听窗口大小变化
const handleResize = () => {
  chartInstance?.resize();
};

// 在生命周期中处理
onMounted(() => {
  initChart();
  window.addEventListener('resize', handleResize);
});

onUnmounted(() => {
  chartInstance?.dispose();
  window.removeEventListener('resize', handleResize);
});
```

### 3.4 常用图表类型

#### 3.4.1 折线图

适用于展示时间趋势数据，如儿童情绪变化趋势。

#### 3.4.2 柱状图

适用于比较不同类别的数据，如不同服务类型的数量对比。

#### 3.4.3 饼图

适用于展示占比数据，如风险等级分布。

#### 3.4.4 散点图

适用于分析两个变量之间的关系。

#### 3.4.5 热力图

适用于展示密度数据，如服务频率分布。

### 3.5 主题定制

可以根据项目的设计系统，定制ECharts的主题：

```typescript
// 主题配置
const theme = {
  color: ['#4F46E5', '#10B981', '#F97316', '#6B7280', '#EF4444'],
  backgroundColor: '#ffffff',
  textStyle: {},
  title: {
    textStyle: {
      color: '#1F2937',
    },
  },
  // 其他主题配置...
};

// 在初始化时应用主题
chartInstance = echarts.init(chartRef.value, theme as any);
```

### 3.6 注意事项

1. **性能优化**：对于大数据量的图表，使用 `dataZoom`、`sampling` 等技术优化性能
2. **响应式**：确保图表能正确响应容器大小变化
3. **内存管理**：组件卸载时必须调用 `dispose()` 方法销毁图表实例
4. **类型安全**：使用 TypeScript 时，利用 `EChartsOption` 类型确保配置正确
5. **按需引入**：对于大型项目，可以考虑按需引入ECharts组件以减小打包体积

## 4. 项目结构

项目遵循标准的 Vue 3 + TypeScript 项目结构：

```
src/
├── components/      # 通用组件
├── views/           # 页面组件
├── router/          # 路由配置
├── stores/          # 状态管理
├── services/        # API服务
├── assets/          # 静态资源
├── App.vue          # 根组件
└── main.ts          # 入口文件
```

## 5. 设计系统

### 5.1 色彩系统

```javascript
// 主色调
primary: '#4F46E5',     // 紫色 - 主要品牌色
secondary: '#10B981',   // 绿色 - 成功/积极状态
accent: '#F97316',      // 橙色 - 强调/警告

// 中性色
neutral: '#6B7280',     // 中性文字
light: '#F3F4F6',       // 浅色背景
dark: '#1F2937',        // 深色文字

// 状态色
success: '#22C55E',     // 成功
warning: '#F59E0B',     // 警告
danger: '#EF4444',      // 危险/错误
```

## 6. 开发建议

1. **组件化开发**：将UI拆分为可复用的组件
2. **响应式设计**：确保在不同设备上有良好的显示效果
3. **TypeScript类型**：为所有变量和函数提供明确的类型
4. **代码规范**：遵循项目的代码规范和最佳实践
5. **性能优化**：注意组件的渲染性能，避免不必要的重渲染



CareSync AI 是一个专注于留守儿童情感陪伴与服务的平台，采用 "AI 智能陪伴 + 社工精准介入" 的模式，为留守儿童提供有温度的情感支持，同时为社工提供数据驱动的精准服务工具。

## 技术栈

### 前端技术栈
- **框架**: Vue 3 + TypeScript
- **构建工具**: Vite
- **状态管理**: Pinia
- **路由管理**: Vue Router
- **UI组件库**: Arco Design Vue (需要安装)
- **HTTP客户端**: Axios (需要安装)
- **图表库**: Chart.js (需要安装)

## 设计系统

### 色彩系统

```javascript
// 主色调
primary: '#4F46E5',     // 紫色 - 主要品牌色
secondary: '#10B981',   // 绿色 - 成功/积极状态
accent: '#F97316',      // 橙色 - 强调/警告

// 中性色
neutral: '#6B7280',     // 中性文字
light: '#F3F4F6',       // 浅色背景
dark: '#1F2937',        // 深色文字

// 状态色
success: '#22C55E',     // 成功
warning: '#F59E0B',     // 警告
danger: '#EF4444',      // 危险/错误
```

### 字体系统

```javascript
fontFamily: {
  sans: ['Inter', 'system-ui', 'sans-serif']
}
```

### 通用样式

```css
.transition-custom {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.card-shadow {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

.btn-shadow {
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
}
```

## 项目结构

```
src/
├── assets/           # 静态资源
├── components/       # 通用组件
│   ├── common/       # 公共组件
│   ├── layout/       # 布局组件
│   └── views/        # 页面组件
├── hooks/            # 自定义hooks
├── router/           # 路由配置
├── services/         # API服务
├── stores/           # Pinia状态管理
├── styles/           # 全局样式
├── utils/            # 工具函数
├── views/            # 页面视图
│   ├── home/         # 首页相关
│   ├── auth/         # 认证相关
│   ├── children/     # 儿童管理相关
│   ├── analysis/     # 分析相关
│   └── schemes/      # 服务方案相关
├── App.vue           # 根组件
└── main.ts           # 入口文件
```

## 页面开发指南

### 1. 首页 (Home)

**HTML文件**: `prototype/index.html`

**Vue组件**: `src/views/home/HomeView.vue`

**功能要点**:
- 响应式导航栏
- 英雄区域展示
- 核心功能卡片展示
- 平台优势介绍
- 登录入口切换
- 关于我们区域
- 返回顶部功能

**实现建议**:
- 使用Vue Router进行页面内锚点导航
- 导航栏滚动效果使用 `@scroll` 事件监听
- 响应式布局使用Tailwind CSS或自定义媒体查询

### 2. 社工登录页 (Social Worker Login)

**HTML文件**: `prototype/social-worker-login.html`

**Vue组件**: `src/views/auth/SocialWorkerLogin.vue`

**功能要点**:
- 登录表单
- 密码可见性切换
- 记住账号功能
- 忘记密码弹窗
- 表单验证

**实现建议**:
- 使用Vue的响应式数据管理表单状态
- 忘记密码弹窗使用条件渲染或Vue组件实现
- 表单验证使用VeeValidate或自定义验证逻辑
- 登录状态使用Pinia存储

### 3. 儿童管理页 (Children Management)

**HTML文件**: `prototype/social-worker-children.html`

**Vue组件**: `src/views/children/ChildrenManagement.vue`

**功能要点**:
- 侧边栏导航
- 页面头部操作栏
- 搜索和筛选功能
- 儿童列表表格
- 分页功能
- 状态标签展示

**实现建议**:
- 使用Arco Design的Table组件实现表格
- 搜索筛选条件使用响应式数据管理
- 操作按钮使用事件委托或独立事件处理器
- 分页逻辑使用组件化实现

### 4. 儿童详情页 (Child Detail)

**HTML文件**: `prototype/social-worker-child-detail.html`

**Vue组件**: `src/views/children/ChildDetail.vue`

**功能要点**:
- 儿童基本信息展示
- 编辑模式切换
- 信息表单
- 保存和取消操作

**实现建议**:
- 使用路由参数获取儿童ID
- 编辑模式使用v-model和条件渲染控制
- 表单数据使用响应式对象管理
- 提交前进行表单验证

### 5. AI分析结果页 (AI Analysis)

**HTML文件**: `prototype/social-worker-analysis.html`

**Vue组件**: `src/views/analysis/AIAnalysis.vue`

**功能要点**:
- 分析结果列表
- 搜索和筛选
- 图表展示
- 数据分析指标

**实现建议**:
- 使用Chart.js绘制数据图表
- 分析数据使用Pinia存储
- 筛选条件使用响应式数据管理

### 6. 服务方案管理页 (Service Schemes)

**HTML文件**: `prototype/social-worker-schemes.html`

**Vue组件**: `src/views/schemes/SchemeManagement.vue`

**功能要点**:
- 方案列表管理
- 搜索和筛选
- AI生成方案功能
- 方案状态管理

**实现建议**:
- 使用表格组件展示方案列表
- 状态筛选使用下拉选择器
- AI生成方案功能使用异步处理

## 组件开发指南

### 1. 布局组件

#### 导航栏 (NavBar)

**文件路径**: `src/components/layout/NavBar.vue`

**功能**: 提供全局导航功能，包含logo、菜单项、用户信息等

**属性**:
- `type`: 导航栏类型 (主页导航/应用内导航)
- `showUser`: 是否显示用户信息

### 2. 公共组件

#### 状态标签 (StatusBadge)

**文件路径**: `src/components/common/StatusBadge.vue`

**功能**: 显示不同状态的标签

**属性**:
- `status`: 状态类型 (success/warning/danger/info)
- `text`: 标签文本

#### 操作按钮组 (ActionButtonGroup)

**文件路径**: `src/components/common/ActionButtonGroup.vue`

**功能**: 提供查看、编辑、删除等操作按钮

**属性**:
- `actions`: 操作按钮配置数组
- `size`: 按钮尺寸

### 3. 表单组件

#### 搜索输入框 (SearchInput)

**文件路径**: `src/components/common/SearchInput.vue`

**功能**: 带图标的搜索输入框

**属性**:
- `placeholder`: 占位文本
- `value`: 输入值 (v-model)

#### 筛选选择器 (FilterSelect)

**文件路径**: `src/components/common/FilterSelect.vue`

**功能**: 用于筛选的下拉选择器

**属性**:
- `options`: 选项数组
- `value`: 选中值 (v-model)
- `placeholder`: 占位文本

## 状态管理

### 1. 用户状态 (User Store)

**文件路径**: `src/stores/user.ts`

**功能**: 管理用户登录状态、权限等信息

```typescript
interface UserState {
  isLoggedIn: boolean;
  userInfo: {
    id: string;
    name: string;
    avatar: string;
    role: string;
  } | null;
  token: string | null;
}
```

### 2. 儿童状态 (Children Store)

**文件路径**: `src/stores/children.ts`

**功能**: 管理儿童列表、详情、筛选条件等

### 3. 分析状态 (Analysis Store)

**文件路径**: `src/stores/analysis.ts`

**功能**: 管理AI分析结果数据

### 4. 方案状态 (Schemes Store)

**文件路径**: `src/stores/schemes.ts`

**功能**: 管理服务方案数据

## API服务

### 1. 认证服务 (Auth Service)

**文件路径**: `src/services/auth.ts`

**主要方法**:
- `login(username: string, password: string)`: 用户登录
- `logout()`: 用户登出
- `forgotPassword(username: string)`: 忘记密码

### 2. 儿童服务 (Children Service)

**文件路径**: `src/services/children.ts`

**主要方法**:
- `getChildren(params: any)`: 获取儿童列表
- `getChildDetail(id: string)`: 获取儿童详情
- `createChild(data: any)`: 创建儿童信息
- `updateChild(id: string, data: any)`: 更新儿童信息
- `deleteChild(id: string)`: 删除儿童信息

### 3. 分析服务 (Analysis Service)

**文件路径**: `src/services/analysis.ts`

**主要方法**:
- `getAnalysisResults(params: any)`: 获取分析结果
- `getAnalysisDetail(id: string)`: 获取分析详情
- `regenerateAnalysis(childId: string)`: 重新生成分析

### 4. 方案服务 (Schemes Service)

**文件路径**: `src/services/schemes.ts`

**主要方法**:
- `getSchemes(params: any)`: 获取方案列表
- `getSchemeDetail(id: string)`: 获取方案详情
- `generateScheme(childId: string)`: AI生成方案
- `createScheme(data: any)`: 创建方案
- `updateScheme(id: string, data: any)`: 更新方案
- `deleteScheme(id: string)`: 删除方案

## 开发步骤

### 1. 项目初始化

```bash
# 安装依赖
npm install

# 安装额外需要的依赖
npm install arco-design-vue axios chart.js

# 启动开发服务器
npm run dev
```

### 2. 配置路由

修改 `src/router/index.ts`，添加所有需要的路由配置：

```typescript
import { createRouter, createWebHistory } from 'vue-router';

const routes = [
  { path: '/', name: 'Home', component: () => import('../views/home/HomeView.vue') },
  { path: '/login', name: 'Login', component: () => import('../views/auth/SocialWorkerLogin.vue') },
  { path: '/children', name: 'Children', component: () => import('../views/children/ChildrenManagement.vue') },
  { path: '/children/:id', name: 'ChildDetail', component: () => import('../views/children/ChildDetail.vue') },
  { path: '/analysis', name: 'Analysis', component: () => import('../views/analysis/AIAnalysis.vue') },
  { path: '/analysis/:id', name: 'AnalysisDetail', component: () => import('../views/analysis/AnalysisDetail.vue') },
  { path: '/schemes', name: 'Schemes', component: () => import('../views/schemes/SchemeManagement.vue') },
  { path: '/schemes/:id', name: 'SchemeDetail', component: () => import('../views/schemes/SchemeDetail.vue') },
];

const router = createRouter({
  history: createWebHistory(),
  routes
});

export default router;
```

### 3. 创建全局样式

在 `src/styles` 目录下创建全局样式文件，并在 `main.ts` 中引入：

```typescript
// main.ts
import { createApp } from 'vue'
import { createPinia } from 'pinia'
import App from './App.vue'
import router from './router'
import './styles/main.css'
import ArcoVue from 'arco-design-vue'
import 'arco-design-vue/dist/arco.css'

const app = createApp(App)

app.use(createPinia())
app.use(router)
app.use(ArcoVue)

app.mount('#app')
```

### 4. 开发各个页面组件

按照文档中的页面开发指南，逐个开发页面组件，确保外观与HTML原型一致。

### 5. 实现数据模拟

在 `src/services` 中创建模拟数据，以便在没有后端API的情况下展示页面：

```typescript
// src/services/mockData.ts

export const mockChildren = [
  {
    id: '1',
    name: '小明',
    gender: '男',
    age: 10,
    phone: '138****1234',
    riskLevel: 'urgent',
    status: 'in-progress',
    lastInteraction: '今天 10:30'
  },
  // 更多模拟数据...
];
```

### 6. 测试与优化

- 测试所有页面的响应式布局
- 确保交互功能正常工作
- 优化代码性能
- 进行UI细节调整

## 注意事项

1. **响应式设计**: 确保所有页面在不同设备尺寸下都能正常显示
2. **性能优化**: 避免不必要的重渲染，使用虚拟滚动处理长列表
3. **安全考虑**: 实现登录验证和权限控制
4. **代码规范**: 遵循Vue 3和TypeScript的最佳实践
5. **可访问性**: 确保页面符合可访问性标准

## 后续优化建议

1. 添加单元测试和端到端测试
2. 实现国际化支持
3. 优化首屏加载速度
4. 添加暗黑模式支持
5. 实现离线功能